飞行训练器接口系统和操纵负荷系统的设计研究
1 接口系统
PA44-180(G1000) FTD 接口系统由 I/O 控制箱、电源、接口配线箱和连接电缆等设备构成，负责硬件设备与主仿真系统间的数据通讯。
接口系统特性如下：
 计算机与 I/O 控制箱（标准 I/O 控制箱和特殊 I/O 控制箱）通过千兆以太网连接。 I/O 控制箱由 I/O 控制板和 I/O 功能板组成。
 标准 I/O 控制箱可包含四类标准 I/O 功能板。I/O 功能板的信号按照信号的电气特性，可归类为数字输入板（DI），数字输出板（DO），模拟输入板（AI），模拟输出板（AO）。
 特殊 I/O 控制箱按照不同的飞行驾驶舱设备所产生的信号进行定制。
1.1 组成
PA44-180(G1000) FTD 接口系统主要包括仪表板、中央操纵台、脚蹬、驾驶盘组件、信号采集箱及 CAN 总线汇集箱等部分。
接口系统通过 CAN 总线实现下位机与上位机的数据通信。仪表板、中央操纵台、脚蹬、驾驶盘组件的信号由信号采集箱进行信号采集。信号采集箱由 CAN总线汇集箱统一供电并将通信信号汇集，再由 CAN 总线汇集箱将相关信号发送至上位机的 CAN 总线数据采集卡，从而实现上下位机的数据通信，组成框图见图 1。

图 1 电子系统组成框图
1.2 信号采集箱及 CAN 总线汇集箱
信号采集箱负责采集并处理飞行驾驶舱设备（包括仪表、开关、电位器和断路器等）发送的信号，经过 CAN 总线汇集箱通过 CAN 总线与上位机进行通讯。
信号采集箱主要包括 I/O 采集板和模拟量采集板两部分：
(1) I/O 信号采集板的功能：
将驾驶舱内的开关信号以及指示灯等 I/O 离散信号进行数据采集和控制，通过 CAN 总线与上位机进行数据交互。
(2) 模拟信号采集板的功能：
将驾驶舱内的所有模拟信号进行数据采集，通过 CAN 总线与上位机进行数据交互。
1.3 状态值查询功能
设备可能出现软件重启硬件不重启的情况，此时上位机无法获取旋钮及按键等输入信号，因此在项目中增加状态机查询的功能，按如下方式进行：
当上位机需要获取相关旋钮等状态值的时候，按照通信协议向下位机发送相应指令，下位机会逐条上传各个面板旋钮的当前状态值。上位机在逐条发送查询指令时，需在下位机完成返回当前面板状态值的任务后再由上位机发送下一面板的状态查询指令。
下位机在接收到状态查询指令并返回所有状态值后需向上位机发送任务完成指令，上位机在接收到完成指令后方可进行下一面板的状态查询工作。
下位机面板状态上传的数据发送优先级要次于正常操作的数据发送优先级。
1.4 采集板在线诊断功能
设备可能出现采集板无法正常通信的情况，因此在项目中增加采集板在线诊断功能。
上位机定时在总线上发送诊断指令，当有信号采集板无法正常通信时，由于接收不到总线上的诊断指令进而立即进行复位重启，使其重新恢复正常通信，从而解决信号采集板无法正常通信的问题。
1.5 信号采集
PA44-180(G1000) FTD 接口系统各控制面板及各个操纵组件的信号采集通过我方自主研制的信号采集板进行信号采集。此项目硬件电子设计部分采用模块化设计，将每一功能板都设计成一个模块，每个模块中都有一块电路板，独立地采集和控制信号，模块通过航空插头和传输线与上位机相连。通过 CAN 总线实现一个主设备（上位机）与多个从设备（每一个模块）之间数据的通信。从而实现便于拆卸，便于检测和维修的目的。
下面以仪表板面板为例介绍一下其信号流图，仪表板面板信号流图见图 2。

图2 仪表板面板信号流图
其中按键、波段开关及编码器类信号都是通过信号采集板内的三态缓冲器模块将面板上的物理信号（按压、拨动及旋转）转变为电信号的高电平或是低电平。
再由程序识别相应的接口对应的数据，按照协议将数据转换成相应信号发送给上位机。
指示灯及数码管信号则是通过接收到上位机的指示灯开关命令后，程序按照协议将此命令转换成相应的数字信号,控制电路板不同接口的高低电平转换，从而控制这些接口所接指示灯的亮灭。再按照协议将数据转换成相应信号由上位机发送给下位机，从而实现对仪表板面板的信号采集控制。

2 操纵负荷系统
PA44-180(G1000) FTD 操纵负荷系统采用三通道数字电动伺服操纵负荷系统来模拟驾驶盘、脚蹬的力和行程，真实再现不同速度、高度等条件下的操纵力。
飞行控制具有低摩擦电动作动器，形成主伺服控制回路的驾驶员力反馈和对爆发力产生平稳而锐利反应的高速数字控制系统；具备安全特性，以及一套保护飞行控制系统的电子探测系统。
操纵负荷系统采用力伺服系统进行加载，利用传感器测量操纵杆上的力、位移、速度等信号，经计算机内仿真模型程序的计算，得到加于力伺服系统执行机构上的控制指令，执行机构产生的力直接加到操纵杆上。该系统仿真程度高、杆力的模型和参数易于修改，可适应不同仿真对象和不同工作模式下杆力特性变化的要求。
2.1 原理概述
操纵负荷系统采用华翼蓝天自研的操纵负荷系统，华翼蓝天操纵负荷系统采用了高动态超精密伺服电机和高速嵌入式 PC，能够实现高逼真度的力感，可以模拟飞机在不同飞行条件下以及不同操纵模式下操纵负荷系统的静态和动态特性。华翼蓝天操纵负荷系统硬件系统采用进口的货架产品，在此基础上开发的操纵负荷控制系统能够达到应用于 5 级模拟器操纵负荷系统的性能要求。
操纵负荷系统是一个闭环控制的系统。通过传感器测量操纵杆或脚蹬上的力、位移、速度等信号，将采集到的信号传到主仿真计算机以及操纵负荷系统计算机，计算得到应加于执行机构上的控制指令，将控制指令传到执行机构，执行机构产生的力直接加到驾驶杆或脚蹬上。这种方法计算精度高、杆力模型和参数易于修改，可实现不同仿真对象以及不同工作模式的杆力特性。
操纵负荷系统计算机与主仿真计算机通过以太网连接，操纵负荷系统计算机接受来自飞行驾驶舱集成平台主计算机的有关操纵负荷系统的信息（铰链力矩系数、惯性力、摩擦系数等），同时收集飞机操纵机构的信号（驾驶杆、脚蹬等的模拟量输入信息、有关开关按钮的输入信号等），通过自身的实时管理软件计算得到各个操纵机构的模型力，再与操纵机构的力传感器的实测力进行比较，得到力的误差信号，送至伺服控制器，由伺服控制器驱动电机，使驾驶员感受到操纵力。同时，操纵负荷系统计算机还计算出当前条件下的机构部件的差值，将差值信号送到主仿真计算机。
操纵负荷系统采用了高速专用微机系统，迭代速率可达 1000Hz，此外操纵负荷系统计算机还采用了高分辨率、高转换速度的实时 I/O 接口，可以避免了混叠效应引起的失真，并避免了量化阶梯带来的不平滑感。
操纵负荷系统由主仿真计算机、操纵负荷系统计算机和电动加载装置构成，其中电动加载装置为核心部分，如图3 所示，箭头的方向表示了信号传递方
向。

图3 操纵负荷系统框图
2.2 系统组成
华翼蓝天操纵负荷系统主要由操纵负荷实时计算机、操纵负荷伺服电机驱动器、高动态超精密伺服电机、减速机及电动作动筒、操纵负荷线缆等部件组成。
华翼蓝天操纵负荷系统的操纵性能、控制规律与飞机的操纵特性相似。采用了能满足高速迭代计算的专用计算机以及 A/D、D/A 转换接口，可以高逼真地模拟操纵力并实现操纵力的平滑稳定的输出。满足飞机品质规范和飞机操纵系统规范要求；力模型中考虑了摩擦力、惯性力、配平效果、力限制、死区、位移限位以及操纵系统各组件的质量、惯性矩等多个复杂非线性特性的模拟，调试方便。
华翼蓝天操纵负荷系统硬件系统采用进口的货架产品，系统具有较高的可靠性。主要部件信息如下表所示：
 表 10-1 操纵负荷系统系统主要器件信息表
华翼蓝天操纵负荷系统组件如下图所示：

图 10.2 操纵负荷系统组件
2.3 主要参数

2.4 诊断维护
PA44-180(G1000) FTD操纵负荷系统提供一套诊断维护模块，以便于用户深入分析飞行控制系统特性，对设备的故障进行诊断和排故。
诊断维护模块提供一系列的自动调整程序，以用于系统的常规维护：
(1)	力偏移和机械摩擦补偿；
(2)	 数值或放大器伺服增益调整；
(3)	转速调整。
